{% extends "admin/base.html" %}
{% load i18n %}
{% block bodyclass %}search{% endblock %}
{% load faceted_search_extras %}

{% block pretitle %}
  <h1>Search FEED</h1>
{% endblock %}

{% block content_title %}<p class="col-xs-10 col-xs-offset-1">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse quis ullamcorper velit. Praesent hendrerit mauris et luctus lacinia. Cras ac ornare quam, vitae vulputate libero. Nullam volutpat mauris tincidunt pretium lacinia. Phasellus posuere aliquam sem sit amet facilisis. Quisque placerat elit eu est adipiscing, a porttitor libero laoreet. Nunc posuere adipiscing mauris, sit amet tempus augue tincidunt ac. Duis porta arcu sed leo bibendum interdum. To access data contained within the XMA portal please click <a href="http://xmaportal.org">here</a>.</p>{% endblock %}

{% block content %}
<div class="row">
  <form method="get" action=".">
    <table class="search-box table col-xs-12">
      <!-- {{ form.as_table }} -->
      <tbody>
        <tr>
          <th class="col-xs-offset-1 col-xs-2">
            <label for="id_q">Enter your search term(s):</label>
          </th>
          <td class="col-xs-6">
            {{ form.q }}
          </td>
          <td class="col-xs-2">
            <input type="submit" value="Submit">
          </td>
        </tr>
      </tbody>
    </table>
  </form>
</div>
<div class="row">
  <div class="col-xs-12">
    <hr />
  </div>
</div>

  {% if page or query %}

<div class="row">
  <div class="col-xs-3">
    <aside>
      <h3>Advanced Search</h3>
      {% show_facets facet_items 'muscles' %}
      {% show_facets facet_items 'muscles_part_of' %}
    </aside>
  </div>
  <div class="col-xs-9">
    <div class="row">
      <div class="records-number col-xs-5 col-lg-4">
        <h3>Results ({{ page.paginator.count }})</h3>
      </div>
      <div class="records-list col-xs-5 col-xs-offset-2 col-lg-4 col-lg-offset-4">
        <p>Records to display:</p>
        <ul>
          <li><a href="">10</a></li>
          <li><a href="">30</a></li>
          <li><a href="">50</a></li>
          <li><a href="">100</a></li>
          <li><a href="">200</a></li>
        </ul>
      </div>
    </div>
    <table>
      <tr>
        <th class="choose"><input type="checkbox" name="viewby" value="blank" /></th>
        <th class="column2">Trial Name</th>
        <th class="column3">Date</th> 
        <th class="column4">Species</th>
        <th class="column5">Primary<br />Behavior</th>
        <th class="column6">Techniques</th>
        <th class="column7">Anatomical<br />Location</th>
        <th class="column8">Food Type</th>
        <th class="column9">Collections</th>
      </tr>
      {% for result in page.object_list %}
        <tr>
          <td class="choose"><input type="checkbox" name="viewby" value="blank" /></td>
          <td class="column2"><a href="">{{ result.object.title }}</a></td>
          <td class="column3"><a href="">6-19-2001</a></td> 
          <td class="column4"><a href="">Lemur catta</a></td>
          <td class="column5"><a href="">Mastication</a></td>
          <td class="column6"><a href="">EMG</a></td>
          <td class="column7">{% for label in result.muscles_direct %}<a href="/{{ label }}">{{ label }}</a> {% endfor %}</td>
          <td class="column8"><a href="">Gummy Bear</a></td>
          <td class="column9"><a href="">collection-1</a></td>
        </tr>
        {% empty %}
          <p>No results found.</p>
      {% endfor %}
    </table>
    <div class="row">
      <div class="records-selection col-xs-8 col-xs-offset-2 col-lg-6 col-lg-offset-3">
        <p>Add selected records to collection:</p>
        <form action="">
          <select class="chosen-select">
            <option>Existing collection</option>
            <option>Add new collection</option>
          </select>
        </form>
      </div>
    </div>

<!--
        {% for result in page.object_list %}

      <div class="result" style="border: solid black; margin: 0.5em; padding: 0.5em;">
        Muscles (direct): <br />
        <ul>
          {% for label in result.muscles_direct %}
            <li>{{ label }}</li>
          {% endfor %}
        </ul>
        Muscles (subclass expanded): <br />
        <ul>
          {% for label in result.muscles %}
            <li>{{ label }}</li>
          {% endfor %}
        </ul>
        Trial title: {{ result.object.title }}<br />
        Session title: {{ result.object.session.title }}<br />
        Experiment title: {{ result.object.session.experiment.title }}<br />
        Study title: {{ result.object.session.experiment.study.title }}<br />
      </div>
    {% empty %}
    <p>No results found.</p>
  {% endfor %}
-->

  {% if page.has_previous or page.has_next %}
    <div class="row">
      <div class="records-pagination col-xs-3 col-xs-offset-4">
        {% if page.has_previous %}<a href="?q={{ query }}&amp;page={{ page.previous_page_number }}">{% endif %}&laquo; Previous{% if page.has_previous %}</a>{% endif %}
        |
        {% if page.has_next %}<a href="?q={{ query }}&amp;page={{ page.next_page_number }}">{% endif %}Next &raquo;{% if page.has_next %}</a>{% endif %}
      </div>
    </div>
  </div>
  {% endif %}
  {% else %}
  {# Show some example queries to run, maybe query syntax, something else? #}
  {% endif %}
</form>
{% endblock content %}
