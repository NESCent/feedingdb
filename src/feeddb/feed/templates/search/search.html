{% extends "admin/base.html" %}
{% load i18n %}
{% load faceted_search_extras %}
{% block content %}
<html>
<head></head>
<body>
<h2>Search</h2>
<form method="get" action=".">
  <table>
    {{ form.as_table }}
    <tr>
      <td>&nbsp;</td>
      <td>
        <input type="submit" value="Search">
      </td>
    </tr>
  </table>
  {% if page or query %}
    <div>
      <h4>automatic facet</h4>
      {% show_facets facet_items 'muscles' %}
      {% show_facets facet_items 'muscles_part_of' %}
    </div>
  <h3>Results ({{ page.paginator.count }})</h3>
  {% for result in page.object_list %}
    <div class="result" style="border: solid black; margin: 0.5em; padding: 0.5em;">
      Muscles (direct): <br />
      <ul>
        {% for label in result.muscles_direct %}
          <li>{{ label }}</li>
        {% endfor %}
      </ul>
      Muscles (subclass expanded): <br />
      <ul>
        {% for label in result.muscles %}
          <li>{{ label }}</li>
        {% endfor %}
      </ul>
      Trial title: {{ result.object.title }}<br />
      Session title: {{ result.object.session.title }}<br />
      Experiment title: {{ result.object.session.experiment.title }}<br />
      Study title: {{ result.object.session.experiment.study.title }}<br />
    </div>
  {% empty %}
  <p>No results found.</p>
  {% endfor %}
  {% if page.has_previous or page.has_next %}
  <div>
    {% if page.has_previous %}<a href="?q={{ query }}&amp;page={{ page.previous_page_number }}">{% endif %}&laquo; Previous{% if page.has_previous %}</a>{% endif %}
    |
    {% if page.has_next %}<a href="?q={{ query }}&amp;page={{ page.next_page_number }}">{% endif %}Next &raquo;{% if page.has_next %}</a>{% endif %}
  </div>
  {% endif %}
  {% else %}
  {# Show some example queries to run, maybe query syntax, something else? #}
  {% endif %}
</form>
</body>
</html>
{% endblock content %}
