{% extends "admin/base_site.html" %}
{% load i18n admin_modify feedmedia %}
{% load explorer_display %}

{% block extrahead %}{{ block.super }}
<script type="text/javascript" src="../../../jsi18n/"></script>
{{ media }}
<script type="text/javascript" src="{% app_static_prefix %}js/tabview.js"></script>
{% endblock %}

{% block coltype %}colM{% endblock %}

{% block bodyclass %}{{ opts.app_label }}-{{ opts.object_name.lower }} change-form{% endblock %}

{% if not is_popup %}
  {% block breadcrumbs %}
    <div class="container">
      <div class="row">
        <div class="col-xs-12">
          <div class="breadcrumbs">
          	<ul id="crumbs">
            <li><a href="/">
              {% trans "Home" %}
            </a></li><span>/</span>
             <!-- li><a href="../">
               {{ app_label|capfirst }}
            </a></li -->
            <li>{% include "admin/includes/object_path.html" %}</li>
          </div>
        </div>
      </div>
    </div>
  {% endblock %}
{% endif %}
    
<!-- Title block -->
{% block pretitle %}
    <div class="row">
      <div class="col-xs-12">
        <h1>{% if change %}Edit{% else %}{% if view %}View{% else %}Add{% endif %}{% endif %}  {{ opts.object_name.lower}}</h1>
      </div>
      <div class="col-xs-12">
        <hr />
      </div>
    </div>
  </div>
</div>
{% endblock %}


{% block content %}
  <div id="content-main">
    <form {% if has_file_field %}enctype="multipart/form-data" {% endif %}action="{{ form_url }}" method="post" id="{{ opts.module_name }}_form">{% block form_top %}
{% endblock %}

      {% if tabbed %}
      <div class="panel-group" id="accordion">
        <div class="panel panel-default">

          <div class="panel-heading">
            <h3 class="panel-title">
              <a data-toggle="collapse" data-parent="#accordion" href="#{% ifequal tab_name None %}{{ opts.object_name }}{% else %}{{ tab_name }}{% endifequal %}">{% ifequal tab_name None %}{{ opts.object_name }}{% else %}{{ tab_name }}{% endifequal %}</a>
            </h3>
          </div>
          <div id="{% ifequal tab_name None %}{{ opts.object_name }}{% else %}{{ tab_name }}{% endifequal %}" class="panel-collapse collapse in">
            <div class="panel-body">
            {% if is_popup %}
              <input type="hidden" name="_popup" value="1" />{% endif %}
              <div class="row">
                <div class="col-xs-2 col-xs-offset-10 admin-tools">
                  <ul class="object-tools object-tools-top">
                  {% if has_change_permission %}
                    <li><a class="changelink" href="edit/" ><span class="glyphicon glyphicon-pencil"></span></a></a></li>
                    {% endif %}	
                    {% if has_delete_permission %}
                    <li><a class="deletelink" href="delete/" ><span class='glyphicon glyphicon-remove'></span></a></li>
                    {% endif %}
                    
                    {% if has_change_permission %}
                    {% if cloneable %}
                    <li><a class="clonelink" href="clone/" ><span class='glyphicon glyphicon-plus-sign'></span></a></li>
                    {% endif %}
                    {% endif %}
                    {% if has_change_permission %}
                    <li><a href="history/" class="historylink"><span class='glyphicon glyphicon-calendar'></span></a></li>
                    {% if has_absolute_url %}<li><a href="../../../r/{{ content_type_id }}/{{ object_id }}/" class="viewsitelink">{% trans "View on site" %}</a>
                    </li>{% endif%}
                  </ul>
                </div>
              </div>
            {% endif %}	
            <div class="row">
              {% for fieldset in adminform %}
                {% include "admin/includes/fieldset_view.html"  %}
              {% endfor %}
              
              {% block after_field_sets %}{% endblock %}
              {% if tabbed %}
              {% for inline_admin_formset in inline_admin_formsets %}
              {% if  not inline_admin_formset.opts.tabbed %}
              {% ifequal inline_admin_formset.opts.template "admin/edit_inline/stacked.html" %}
                      {% include "admin/stacked_view.html" %}
                  {% else %}
                      {% include "admin/tabular_view.html" %}
                  {% endifequal %}
              
              {% endif %}
              {% endfor %}
              {% endif %}
              {% if tabbed %}
            </div>
          </div>
              {% endif %}
          {% for inline_admin_formset in inline_admin_formsets %}
            {% if tabbed and inline_admin_formset.opts.tabbed %}
      
          <div class="panel-body">
            {% ifequal inline_admin_formset.opts.template "admin/edit_inline/stacked.html" %}
              {% include "admin/stacked_view.html" %}
            {% else %}
        		  {% include "admin/tabular_view.html" %}
            {% endifequal %}
          </div>
            {% else %}
              {% if not tabbed %}
                {% ifequal inline_admin_formset.opts.template "admin/edit_inline/stacked.html" %}
                  {% include "admin/stacked_view.html" %}
                {% else %}
                  {% include "admin/tabular_view.html" %}
                {% endifequal %}
              {% endif %}
            {% endif %}
          {% endfor %}
          {% if tabbed %}
        </div> <!-- /panel-group -->
      </div> <!-- /panel panel-default -->
      {% endif  %}


{% block after_related_objects %}
{% endblock %}

{% endif %}

    
              {% for inline_admin_formset in inline_admin_formsets %}
          {% if inline_admin_formset.opts.tabbed%}
         <a data-toggle="collapse" data-parent="#accordion" href="#{% ifequal inline_admin_formset.opts.tab_name None %}{{ inline_admin_formset.opts.verbose_name }}{% else %}{{ inline_admin_formset.opts.tab_name }}{% endifequal %}">{% ifequal inline_admin_formset.opts.tab_name None %}{{ inline_admin_formset.opts.verbose_name }}{% else %}{{ inline_admin_formset.opts.tab_name }}{% endifequal %}</a>
         </h3>
        </div>
          {% endif %}
      {% endfor %}
    </div>
  </form>
</div>
{% endblock %}

{% block final_block %}
<script type="text/javascript">
    tabview_switch_by_name('TabView','{% ifequal tab_name None %}{{ opts.object_name }}{% else %}{{ tab_name }}{% endifequal %}');
</script>
{% endblock %}

